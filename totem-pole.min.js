(function(){var l={any:[]},c=[],j=["click","change","focus","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","submit"];TP=function(n,u){var s=document.querySelectorAll(n);if(s.length===1){s=s[0];if(u instanceof Array){if(u.length==0){s.style.display="none";return null}else{var q=[],v=n.split(" ")[n.split(" ").length-1],p=1,t=u.length;q.push(a.call({view:s},u[0],v));for(;p<t;p++){var o=s.cloneNode(true),m=a.call({view:o},u[p],v);o.id="";q.push(m);f(o,s);s=o}return q}}else{return a.call({view:s},u)}}else{if(s.length>1){var t=s.length,p=0,r=[];for(;p<t;p++){r.push(a.call({view:s[p]},u))}return r}}};TP.template=function(n,m){var o={},p=n.split(" ")[n.split(" ").length-1];o.view=document.querySelector(n).cloneNode(true);a.call(o,m,p);return o};TP.subscribe=function(m,n){if(typeof m=="function"){n=m;m="any"}l[m]=l[m]||[];l[m].push(n)};TP.publish=function(p,n){var o=0,m=l[p]?l[p].length:0;if((typeof p)=="object"&&n==null){n=p;p="any"}for(;o<m;o++){l[p][o].apply(null,n)}};TP.all=function(){var p=[],o="",n=0,m=0;for(o in c){m=c[o].length;for(n=0;n<m;n++){if(c[o][n]){p.push(c[o][n])}}}return p};TP.group=function(q){var o=[],p=c[q],n=0,m=p.length;for(;n<m;n++){if(p[n]){o.push(p[n])}}return o};TP.chain=function(m,n){if(m=="all"){}else{(function(o,p){TP.subscribe(o,function(){var s=TP.group(o),r=0,q=s.length;for(;r<q;r++){p.call(s[r])}})})(m,n)}};e();function a(m,n){this.data={};this.set=d(this);this.kill=i;this.html=this.view.outerHTML;this._id=0;this._group=n;this.addClass=h;this.removeClass=k;this.onchange=function(){};if((typeof m)==="object"){this.set(m)}if(!c[n]){c[n]=[]}this._id=c[n].length;c[n].push(this);return this}function d(t){var p=g.call(t.view,{}),u="",m={};for(u in p){var n=0,r=p[u].length;m[u]=null;for(;n<r;n++){var o=p[u][n].dom,q=p[u][n].type;if(q==="html"&&o.innerHTML){m[u]=o.innerHTML}else{if(q==="text"&&o.innerText){m[u]=o.innerText}else{if(q==="value"&&o.value){m[u]=o.value}}}}}b(t,p,m);function s(v,w){if(typeof w!="function"){this.data[v]=w}}return function(v,y){var x={};if((typeof v)==="object"){x=v;for(var w in x){s.call(this,w,x[w])}}else{if((typeof v)==="string"&&["string","object","function"].indexOf(typeof y)!==-1){s.call(this,v,y);x[v]=y}}TP.publish("data-change",[this,p,x]);return t}}function b(v,s,o){for(var w in o){if(!s.hasOwnProperty(w)){continue}var m=s[w],t="",r={},q=o[w],p=0,u=m.length;for(;p<u;p++){t=m[p].type;r=m[p].dom;if(t==="style"){for(var n in q){r.style[n]=q[n]}}else{if(t==="attr"){for(var n in q){r[n]=q[n]}}else{if(t==="html"){r.innerHTML=q}else{if(j.indexOf(t)!==-1&&q){(function(x,y){x.addEventListener(t,function(z){y.call(x,v)})})(r,q)}else{if(t==="text"){r.innerText=q}else{if(t==="value"){r.value=q;(function(y,x){x.onchange=function(z){v.set(y,x.value);v.onchange()}})(w,r)}else{r[t]=q}}}}}}}}}function g(m){var o=this.children;if(o&&o.length!=0){for(var p in o){m=g.call(o[p],m)}}if(this.dataset&&this.dataset.tp){var n=this.dataset.tp.replace(/\s/g,"").split(",");for(var p in n){if(m[n[p].split(":")[0]]){m[n[p].split(":")[0]].push({type:n[p].split(":")[1]||"text",dom:this})}else{m[n[p].split(":")[0]]=[{type:n[p].split(":")[1]||"text",dom:this}]}}}return m}function i(){this.view.remove();delete c[this._group][this._id]}function h(m){this.view.className+=" "+m}function k(p){var o=this.view.className.split(" "),n=0,m=o.length,q="";for(;n<m;n++){if(o[n]!=p){q+=" "+o[n]}}this.view.className=q}function e(){TP.subscribe("data-change",function(m,o,n){b(m,o,n);m.html=m.view.outerHTML;TP.publish(m._group);TP.publish("all")})}function f(p,o){var m=o.parentNode;var n=o.nextSibling;if(n===null){m.appendChild(p)}else{m.insertBefore(p,n)}return p}})();
(function(){var f={any:[]},b=[],d=["click","change","focus","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","submit"];TP=function(j,i){this.view=document.getElementById(j).cloneNode(true);this.view.id="";this.data={};this.set=h(this.view);this.kill=e;this.html=this.view.outerHTML;this._id=0;this._group=j;if((typeof i)==="object"){this.set(i)}if(!b[j]){b[j]=[]}b[j].push(this);this._id=b[j].length};TP.subscribe=function(i,j){if(typeof i=="function"){j=i;i="any"}f[i]=f[i]||[];f[i].push(j)};TP.publish=function(m,k){var l=0,j=f[m]?f[m].length:0;if((typeof m)=="object"&&k==null){k=m;m="any"}for(;l<j;l++){f[m][l].apply(null,k)}};TP.all=function(){var m=[],l="",k=0,j=0;for(l in b){j=b[l].length;for(k=0;k<j;k++){if(b[l][k]){m.push(b[l][k])}}}return m};TP.group=function(n){var l=[],m=b[n],k=0,j=m.length;for(;k<j;k++){if(m[k]){l.push(m[k])}}return l};TP.chain=function(i,j){if(i=="all"){}else{(function(k,l){TP.subscribe(k,function(){var o=TP.group(k),n=0,m=o.length;for(;n<m;n++){l.call(o[n])}})})(i,j)}};TP.clearGroup=function(){for(var i in b){delete b[i]}};a();function h(i){var k=g.call(i,{});function j(l,m){if(k.hasOwnProperty(l)){var n=k[l];this.data[l]=m}}return function(l,o){var n={};if((typeof l)==="object"){n=l;for(var m in n){j.call(this,m,n[m])}}else{if((typeof l)==="string"&&["string","object","function"].indexOf(typeof o)!==-1){j.call(this,l,o);n[l]=o}}TP.publish("data-change",[this,k,n])}}function c(i,p,m){for(var j in m){if(!p.hasOwnProperty(j)){continue}var n=p[j].element,l=p[j].type,o=m[j];if(l==="style"){for(var k in o){n.style[k]=o[k]}}else{if(l==="attr"){for(var k in o){n[k]=o[k]}}else{if(l==="html"){n.innerHTML=o}else{if(d.indexOf(l)!==-1){(function(q,r){q.addEventListener(l,function(s){r.call(q,i)})})(n,o)}else{if(l==="text"||l===""){n.innerText=o}else{if(l==="value"){n.value=o;n.addEventListener("change",function(q){TP.publish("ui-change",[i,j,n.value])})}else{n[l]=o}}}}}}}}function g(i){var k=this.children;if(k&&k.length!=0){for(var l in k){i=g.call(k[l],i)}}if(this.dataset&&this.dataset.tp){var j=this.dataset.tp.replace(/\s/g,"").split(",");for(var l in j){i[j[l].split(":")[0]]={type:j[l].split(":")[1]||"",element:this}}}return i}function e(){this.view.remove();delete b[this._group][this._id]}function a(){TP.subscribe("ui-change",function(i,j,k){i.data[j]=k;TP.publish(i._group)});TP.subscribe("data-change",function(i,k,j){c(i,k,j);i.html=i.view.outerHTML;TP.publish(i._group)})}})();
(function(){var j={any:[]},c=[],i=["click","change","focus","keydown","keypress","keyup","mousedown","mouseout","mouseover","mouseup","submit"];TP=function(l,s){var q=document.querySelectorAll(l);if(q.length===1){q=q[0];if(s instanceof Array){if(s.length==0){q.style.display="none";return null}else{var o=[],t=l.split(" ")[l.split(" ").length-1],n=1,r=s.length;o.push(a.call({view:q},s[0],t));for(;n<r;n++){var m=q.cloneNode(true),k=a.call({view:m},s[n],t);m.id="";o.push(k);f(m,q);q=m}return o}}else{return a.call({view:q},s)}}else{if(q.length>1){var r=q.length,n=0,p=[];for(;n<r;n++){p.push(a.call({view:q[n]},s))}return p}}};TP.template=function(m,k){var l={};l.view=document.getElementById(m).cloneNode(true);a.call(l,k,m);return l};TP.subscribe=function(k,l){if(typeof k=="function"){l=k;k="any"}j[k]=j[k]||[];j[k].push(l)};TP.publish=function(n,l){var m=0,k=j[n]?j[n].length:0;if((typeof n)=="object"&&l==null){l=n;n="any"}for(;m<k;m++){j[n][m].apply(null,l)}};TP.all=function(){var n=[],m="",l=0,k=0;for(m in c){k=c[m].length;for(l=0;l<k;l++){if(c[m][l]){n.push(c[m][l])}}}return n};TP.group=function(o){var m=[],n=c[o],l=0,k=n.length;for(;l<k;l++){if(n[l]){m.push(n[l])}}return m};TP.chain=function(k,l){if(k=="all"){}else{(function(m,n){TP.subscribe(m,function(){var q=TP.group(m),p=0,o=q.length;for(;p<o;p++){n.call(q[p])}})})(k,l)}};e();function a(k,l){this.view.id="";this.data={};this.set=d(this);this.kill=h;this.html=this.view.outerHTML;this._id=0;this._group=l;if((typeof k)==="object"){this.set(k)}if(!c[l]){c[l]=[]}this._id=c[l].length;c[l].push(this)}function d(r){var n=g.call(r.view,{}),s="",k={};for(s in n){var l=0,p=n[s].length;k[s]=null;for(;l<p;l++){var m=n[s][l].dom,o=n[s][l].type;if(o==="html"&&m.innerHTML){k[s]=m.innerHTML}else{if(o==="text"&&m.innerText){k[s]=m.innerText}else{if(o==="value"&&m.value){k[s]=m.value}}}}}b(r,n,k);function q(t,u){if(typeof u!="function"){this.data[t]=u}}return function(t,w){var v={};if((typeof t)==="object"){v=t;for(var u in v){q.call(this,u,v[u])}}else{if((typeof t)==="string"&&["string","object","function"].indexOf(typeof w)!==-1){q.call(this,t,w);v[t]=w}}TP.publish("data-change",[this,n,v])}}function b(t,q,m){for(var u in m){if(!q.hasOwnProperty(u)){continue}var k=q[u],r="",p={},o=m[u],n=0,s=k.length;for(;n<s;n++){r=k[n].type;p=k[n].dom;if(r==="style"){for(var l in o){p.style[l]=o[l]}}else{if(r==="attr"){for(var l in o){p[l]=o[l]}}else{if(r==="html"){p.innerHTML=o}else{if(i.indexOf(r)!==-1&&o){(function(v,w){v.addEventListener(r,function(x){w.call(v,t)})})(p,o)}else{if(r==="text"){p.innerText=o}else{if(r==="value"){p.value=o;(function(w,v){v.onchange=function(x){t.set(w,v.value)}})(u,p)}else{p[r]=o}}}}}}}}}function g(k){var m=this.children;if(m&&m.length!=0){for(var n in m){k=g.call(m[n],k)}}if(this.dataset&&this.dataset.tp){var l=this.dataset.tp.replace(/\s/g,"").split(",");for(var n in l){if(k[l[n].split(":")[0]]){k[l[n].split(":")[0]].push({type:l[n].split(":")[1]||"text",dom:this})}else{k[l[n].split(":")[0]]=[{type:l[n].split(":")[1]||"text",dom:this}]}}}return k}function h(){this.view.remove();delete c[this._group][this._id]}function e(){TP.subscribe("data-change",function(k,m,l){b(k,m,l);k.html=k.view.outerHTML;TP.publish(k._group);TP.publish("all")})}function f(n,m){var k=m.parentNode;var l=m.nextSibling;if(l===null){k.appendChild(n)}else{k.insertBefore(n,l)}return n}})();